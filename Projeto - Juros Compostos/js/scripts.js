document.addEventListener("DOMContentLoaded",function(){const a=document.getElementById("market-data");a&&(a.innerHTML="<p>Dados do mercado ser\xE3o exibidos aqui.</p>");const b=document.getElementById("fixed-income-data"),c=document.getElementById("economic-data");(b||c)&&async function(){try{const a=await fetch("https://api.bcb.gov.br/dados/serie/bcdata.sgs.11/dados?formato=json"),d=await a.json(),e=await fetch("https://api.bcb.gov.br/dados/serie/bcdata.sgs.433/dados?formato=json"),f=await e.json(),g=[{nome:"Tesouro Selic",rendimento:`${d[d.length-1].valor}%`,vencimento:"2025"},{nome:"Tesouro IPCA+",rendimento:"5.00% + IPCA",vencimento:"2035"},{nome:"Tesouro Prefixado",rendimento:"10.00%",vencimento:"2029"},{nome:"Tesouro IPCA+ com Juros Semestrais",rendimento:"4.50% + IPCA",vencimento:"2045"},{nome:"Tesouro Prefixado com Juros Semestrais",rendimento:"9.50%",vencimento:"2031"},{nome:"CDB",rendimento:"110% do CDI",vencimento:"2024"},{nome:"LCI",rendimento:"95% do CDI",vencimento:"2023"}];let h="<ul>";g.forEach(a=>{h+=`<li>${a.nome} - Rendimento: ${a.rendimento} - Vencimento: ${a.vencimento}</li>`}),h+="</ul>",b&&(b.innerHTML=h);const i=`
                <p>Taxa SELIC: ${d[d.length-1].valor}%</p>
                <p>Inflação (IPCA): ${f[f.length-1].valor}%</p>
            `;c&&(c.innerHTML=i)}catch(a){console.error("Erro ao obter dados de renda fixa:",a),b&&(b.innerHTML="<p>Erro ao obter dados de renda fixa.</p>"),c&&(c.innerHTML="<p>Erro ao obter dados econ\xF4micos.</p>")}}()});function calcularJuros(){const a=parseFloat(document.getElementById("aporteInicial").value),b=parseFloat(document.getElementById("aporteMensal").value),c=parseInt(document.getElementById("periodo").value),d=parseFloat(document.getElementById("taxaJuros").value)/100,e=document.getElementById("frequencia").value,f=parseFloat(document.getElementById("aumentoAporte").value)/100,g=document.getElementById("frequenciaAumento").value;if(isNaN(a)||0>a)return void alert("Aporte inicial inv\xE1lido.");if(isNaN(b)||0>b)return void alert("Aporte mensal inv\xE1lido.");if(isNaN(c)||0>=c)return void alert("Per\xEDodo inv\xE1lido.");if(isNaN(d)||0>d)return void alert("Taxa de juros inv\xE1lida.");if(isNaN(f)||0>f)return void alert("Aumento percentual do aporte inv\xE1lido.");let h,i,j=a,k="",l=b,m=[],n=[],o=[],p=a;if("anual"===e){h=c,i=d;for(let a=1;a<=c;a++)if(j+=12*l,p+=12*l,j=Math.pow(1+i,1)*j,k+=`<li>Ano ${a}: Saldo = R$ ${j.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}</li>`,m.push(`Ano ${a}`),n.push(j),o.push(p),"anual"===g){const b=l*f;l*=1+f,k+=`<li>Ano ${a}: Aumento de Aporte = R$ ${b.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}</li>`}}else if("semestral"===e){h=2*c,i=d/2;for(let a=1;a<=h;a++){j+=6*l,p+=6*l,j=Math.pow(1+i,1)*j;const b=Math.ceil(a/2);if(k+=`<li>Semestre ${a} (Ano ${b}): Saldo = R$ ${j.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}</li>`,m.push(`Semestre ${a}`),n.push(j),o.push(p),"semestral"===g&&0==a%2){const c=l*f;l*=1+f,k+=`<li>Semestre ${a} (Ano ${b}): Aumento de Aporte = R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}</li>`}}}else if("mensal"===e){h=12*c,i=d/12;for(let a=1;a<=h;a++){j+=l,p+=l,j=Math.pow(1+i,1)*j;const b=Math.ceil(a/12);if(k+=`<li>Mês ${a} (Ano ${b}): Saldo = R$ ${j.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}</li>`,m.push(`Mês ${a}`),n.push(j),o.push(p),"mensal"===g&&0==a%12){const c=l*f;l*=1+f,k+=`<li>Mês ${a} (Ano ${b}): Aumento de Aporte = R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}</li>`}else if("semestral"===g&&0==a%6){const c=l*f;l*=1+f,k+=`<li>Mês ${a} (Ano ${b}): Aumento de Aporte = R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}</li>`}else if("anual"===g&&0==a%12){const c=l*f;l*=1+f,k+=`<li>Mês ${a} (Ano ${b}): Aumento de Aporte = R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}</li>`}}}const q=document.getElementById("resultados-lista");q.innerHTML=k;const r=document.getElementById("saldoTotalSpan");r.textContent=`Saldo Total: R$ ${j.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`;const s=document.getElementById("taxaDeRetornoSpan");s.textContent=`Taxa de Retorno: ${(100*(Math.pow(1+d,c)-1)).toFixed(2)}%`;const t=document.getElementById("graficoJuros").getContext("2d");new Chart(t,{type:"line",data:{labels:m,datasets:[{label:"Evolu\xE7\xE3o do Investimento",data:n,borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,fill:!1},{label:"Valor Aportado",data:o,borderColor:"rgba(192, 75, 75, 1)",borderWidth:2,fill:!1}]},options:{responsive:!0,scales:{x:{display:!0,title:{display:!0,text:"Per\xEDodo"}},y:{display:!0,title:{display:!0,text:"Saldo (R$)"}}}}})}